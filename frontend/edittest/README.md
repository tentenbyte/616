# 编辑模块测试文件夹

此文件夹包含专门用于测试和调试Canvas表格编辑功能的文件。

## 文件说明

### 🧪 测试文件

1. **`debug-test.html`** - 主要调试测试页面
   - 使用调试版CellEditor，包含详细日志
   - 简化的数据结构和渲染器
   - 可视化的可编辑区域（蓝色高亮）
   - 完整的事件追踪和状态显示

2. **`minimal-test.html`** - 最小化测试
   - 极简的实现，用于快速验证核心功能
   - 内嵌的简单数据结构
   - 基础的CellEditor加载测试

3. **`test-edit.html`** - 完整功能测试
   - 加载所有原始模块
   - 完整的回调设置和事件处理
   - 调试日志面板

### 🔧 调试工具

4. **`debug-cellEditor.js`** - 调试版编辑器
   - 在原版CellEditor基础上增加大量console.log
   - 跟踪每个方法的调用和参数
   - 详细的状态变化记录

## 使用方法

### 快速测试
```bash
# 在frontend目录启动服务器
cd /home/tt/616/frontend
python3 -m http.server 8000

# 在浏览器中访问
http://localhost:8000/edittest/debug-test.html
```

### 调试步骤

1. **打开debug-test.html**
   - 这是主要的调试页面
   - 开发者工具Console会显示详细日志

2. **查看控制台输出**
   - 所有编辑器操作都有详细日志
   - 可以追踪问题发生的具体位置

3. **测试编辑限制**
   - 只有最后一行（蓝色高亮）可以编辑
   - 双击其他行会显示限制信息

4. **手动测试**
   - 使用页面上的按钮进行特定测试
   - 查看状态信息和日志

## 已知问题排查

### 双击无法编辑的可能原因

1. **时间序列限制** - 只能编辑最后一行
2. **Canvas事件处理** - 坐标计算问题
3. **编辑器位置计算** - 输入框定位错误
4. **DOM元素创建** - 输入框未正确添加到页面

### 调试工具

- 浏览器控制台：详细的执行日志
- `window.debugTest` 对象：包含所有调试数据
- 状态面板：实时显示操作结果

## 测试用例

### ✅ 应该成功的操作
- 双击最后一行的任意单元格
- 按Enter键开始编辑选中的最后一行单元格
- 手动调用 `testEditLastRow()`

### ❌ 应该失败的操作
- 双击非最后一行的单元格
- 尝试编辑历史数据
- 手动调用 `testEditFirstRow()`

## 下一步排查

如果问题仍然存在，检查：
1. 主应用中的数据结构初始化
2. Canvas的高DPI设置是否影响坐标计算
3. 编辑器的CSS样式是否被其他样式覆盖
4. 事件冒泡是否被意外阻止